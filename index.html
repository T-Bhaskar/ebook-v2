<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>E-Paper Ebook Reader</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Serif+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="reader-container">
        <!-- Header Controls -->
        <header class="reader-header">
            <div class="header-left">
                <button class="control-btn" id="fileBtn">
                    <i class="fas fa-folder-open"></i>
                    Open PDF
                </button>
                <span class="book-title" id="bookTitle">Select a PDF to start reading</span>
            </div>
            <div class="header-right">
                <button class="control-btn" id="exportPdfBtn" disabled title="Export PDF with customizations">
                    <i class="fas fa-download"></i>
                    Export PDF
                </button>
                <button class="control-btn" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="control-btn" id="pdfFullscreenBtn">
                    <i class="fas fa-expand-arrows-alt"></i>
                    PDF Fullscreen
                </button>
                <button class="control-btn" id="fullscreenBtn">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </header>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-content">
                <h3>Reading Settings</h3>
                
                <div class="setting-group">
                    <label>Page Background Color</label>
                    <div class="color-options">
                        <button class="color-btn active" data-bg="sepia" style="background: #f4f1ea;"></button>
                        <button class="color-btn" data-bg="white" style="background: #ffffff;"></button>
                        <button class="color-btn" data-bg="cream" style="background: #fdf6e3;"></button>
                        <button class="color-btn" data-bg="gray" style="background: #f5f5f5;"></button>
                        <button class="color-btn" data-bg="dark" style="background: #2d2d2d;"></button>
                    </div>
                </div>

                <div class="setting-group">
                    <label>Outer Background Color</label>
                    <div class="color-options">
                        <button class="outer-color-btn active" data-outer-bg="light-beige" style="background: linear-gradient(135deg, #f4f1ea 0%, #e8e4d9 100%);"></button>
                        <button class="outer-color-btn" data-outer-bg="white" style="background: #ffffff;"></button>
                        <button class="outer-color-btn" data-outer-bg="light-gray" style="background: #f8f8f8;"></button>
                        <button class="outer-color-btn" data-outer-bg="dark-gray" style="background: #3a3a3a;"></button>
                        <button class="outer-color-btn" data-outer-bg="black" style="background: #1a1a1a;"></button>
                        <button class="outer-color-btn" data-outer-bg="warm-brown" style="background: linear-gradient(135deg, #8b7355 0%, #6d5a42 100%);"></button>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="brightnessSlider">Brightness</label>
                    <input type="range" id="brightnessSlider" min="0.3" max="1.5" step="0.1" value="1">
                    <span class="slider-value">100%</span>
                </div>

                <div class="setting-group">
                    <label for="contrastSlider">Contrast</label>
                    <input type="range" id="contrastSlider" min="0.5" max="2" step="0.1" value="1.1">
                    <span class="slider-value">110%</span>
                </div>

                <div class="setting-group">
                    <label for="fontSizeSlider">PDF Scale Size</label>
                    <input type="range" id="fontSizeSlider" min="0.8" max="2" step="0.1" value="1.5">
                    <span class="slider-value">150%</span>
                    <small class="setting-note">Scales the entire PDF content</small>
                </div>

                <div class="setting-group">
                    <label>Font Family</label>
                    <select id="fontSelect">
                        <option value="Crimson Text">Crimson Text</option>
                        <option value="Source Serif Pro">Source Serif Pro</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                    </select>
                    <small class="setting-note">For interface elements only</small>
                </div>

                <div class="setting-group">
                    <label for="marginSlider">Page Margins</label>
                    <input type="range" id="marginSlider" min="20" max="100" step="10" value="40">
                    <span class="slider-value">40px</span>
                </div>

                <div class="setting-group">
                    <label>PDF Background Color</label>
                    <div class="color-options">
                        <button class="pdf-bg-btn active" data-pdf-bg="original" style="background: linear-gradient(45deg, #fff 50%, #f0f0f0 50%);"></button>
                        <button class="pdf-bg-btn" data-pdf-bg="white" style="background: #ffffff;"></button>
                        <button class="pdf-bg-btn" data-pdf-bg="sepia" style="background: #f4f1ea;"></button>
                        <button class="pdf-bg-btn" data-pdf-bg="cream" style="background: #fdf6e3;"></button>
                        <button class="pdf-bg-btn" data-pdf-bg="light-gray" style="background: #f8f8f8;"></button>
                        <button class="pdf-bg-btn" data-pdf-bg="dark" style="background: #2d2d2d;"></button>
                    </div>
                    <small class="setting-note">Changes white/light areas in PDF content</small>
                </div>

                <div class="setting-group">
                    <label>PDF Text Color</label>
                    <div class="color-options">
                        <button class="pdf-text-btn active" data-pdf-text="original" style="background: linear-gradient(45deg, #000 50%, #333 50%);"></button>
                        <button class="pdf-text-btn" data-pdf-text="black" style="background: #000000;"></button>
                        <button class="pdf-text-btn" data-pdf-text="dark-gray" style="background: #333333;"></button>
                        <button class="pdf-text-btn" data-pdf-text="brown" style="background: #5d4037;"></button>
                        <button class="pdf-text-btn" data-pdf-text="blue" style="background: #1565c0;"></button>
                        <button class="pdf-text-btn" data-pdf-text="white" style="background: #ffffff; border: 2px solid #ddd;"></button>
                    </div>
                    <small class="setting-note">Changes black/dark text in PDF content</small>
                </div>

                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="eyeProtectionMode">
                        Eye Protection Mode
                    </label>
                </div>

            </div>
        </div>

        <!-- Main Reading Area -->
        <main class="reading-area">
            <!-- File Input -->
            <input type="file" id="fileInput" accept=".pdf" style="display: none;">
            
            <!-- Book Container -->
            <div class="book-container" id="bookContainer">
                <div class="book-spine"></div>
                <div class="page-container">
                    <div class="page current-page" id="currentPage">
                        <div class="page-content" id="pageContent">
                            <div class="welcome-message">
                                <i class="fas fa-book-open"></i>
                                <h2>Welcome to E-Paper Reader</h2>
                                <p>Click "Open PDF" to start your reading journey</p>
                                <div class="features">
                                    <div class="feature">
                                        <i class="fas fa-eye"></i>
                                        <span>Eye-friendly reading</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-palette"></i>
                                        <span>Customizable themes</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-hand-paper"></i>
                                        <span>Natural page turning</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page next-page" id="nextPage">
                        <div class="page-content" id="nextPageContent"></div>
                    </div>
                </div>
            </div>

            <!-- Navigation Controls -->
            <div class="navigation-controls">
                <button class="nav-btn" id="prevBtn" disabled>
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="page-info">
                    <span id="currentPageNum">-</span>
                    <span>/</span>
                    <span id="totalPages">-</span>
                </div>
                <button class="nav-btn" id="nextBtn" disabled>
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </main>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Loading your book...</p>
    </div>


    <!-- PDF Fullscreen Mode -->
    <div class="pdf-fullscreen-mode" id="pdfFullscreenMode">
        <button class="pdf-fullscreen-exit" id="pdfFullscreenExit">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="pdf-fullscreen-content" id="pdfFullscreenContent">
            <!-- PDF content will be inserted here -->
        </div>
        
        <div class="pdf-fullscreen-controls">
            <button class="pdf-fullscreen-btn" id="pdfFullscreenPrev">
                <i class="fas fa-chevron-left"></i>
            </button>
            
            <div class="pdf-fullscreen-info">
                <span id="pdfFullscreenPageNum">1</span>
                <span>/</span>
                <span id="pdfFullscreenTotalPages">1</span>
            </div>
            
            <button class="pdf-fullscreen-btn" id="pdfFullscreenNext">
                <i class="fas fa-chevron-right"></i>
            </button>
            
            <div class="pdf-zoom-control">
                <i class="fas fa-search-minus"></i>
                <input type="range" id="pdfZoomSlider" min="0.5" max="3" step="0.1" value="1">
                <i class="fas fa-search-plus"></i>
                <span class="zoom-value" id="pdfZoomValue">100%</span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
